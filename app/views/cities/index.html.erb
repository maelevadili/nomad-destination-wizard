

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <h1><%= @cities.count %> cities found in <%= @selected_country_name %>!</h1>
      <p>with a minimum nomad score of <%= @selected_score_nomad %></p>

      <%= form_tag cities_path, method: :get, class: 'cities-filters' do %>
        <div>
          <%= label_tag :score_cost, "Cost Score" %>
          <%= select_tag :score_cost, options_for_select(percentage_range_within(0, 100), @filters[:score_cost]), prompt: 'Choose a score' %>
        </div>
        <div>
          <%= label_tag :score_internet, "Internet Score" %>
          <%= select_tag :score_internet, options_for_select(percentage_range_within(0, 100), @filters[:score_internet]), prompt: 'Choose a score' %>
        </div>
        <div>
          <%= label_tag :score_fun, "Fun Score" %>
          <%= select_tag :score_fun, options_for_select(percentage_range_within(0, 100), @filters[:score_fun]), prompt: 'Choose a score' %>
        </div>
        <div>
          <%= label_tag :score_safety, "Safety Score" %>
          <%= select_tag :score_safety, options_for_select(percentage_range_within(0, 100), @filters[:score_safety]), prompt: 'Choose a score' %>
        </div>
        <%= submit_tag "Filter", class: 'btn btn-primary' %>
      <% end %>
    </div>
  </div>
  <div class="row">
    <% if @cities.any? %>
      <div class="cities">
        <% @cities.each do |city| %>
          <div class="col-xs-12 col-md-4">
            <div class="city-card">
              <div class="header" style="background-image: linear-gradient(-225deg, rgba(0,0,0,0.125) 0%, rgba(0,0,0,0.125) 100%), url('<%= city.picture_url %>');">
                <h2 class="name"><%= city.name %></h2>
                <div class="positioned rank">
                  <%= city.rank %>
                </div>

                <div class="positioned weather">
                  <div class="temperature">
                    <%= city.temperature %>Â°C
                  </div>
                  <div class="weather-emoji">
                    <%= city.weather_emoji %>
                  </div>
                </div>

                <div class="positioned rent-cost">
                  <%= city.rent_cost_per_month %>$
                </div>
                <div class="positioned wifi-speed">
                  <%= city.wifi_speed %> MBPS
                </div>
              </div>

              <div class="scores">
                <div class="score nomad">
                  <span>ðŸŽ’ Nomad</span>
                  <div class="rating">
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="<%= city.score_nomad %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= city.score_nomad %>%;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="score cost">
                  <span>ðŸ’¸ Cost</span>
                  <div class="rating">
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="<%= city.score_cost %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= city.score_cost %>%;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="score internet">
                  <span>ðŸ“¡ Internet</span>
                  <div class="rating">
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="<%= city.score_internet %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= city.score_internet %>%;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="score fun">
                  <span>ðŸ˜¬ Fun</span>
                  <div class="rating">
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="<%= city.score_fun %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= city.score_fun %>%;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="score safety">
                  <span>ðŸ‘® Safety</span>
                  <div class="rating">
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="<%= city.score_safety %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= city.score_safety %>%;">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p>
        Try to change or
        <%= link_to 'reset your filters', cities_path %>
      </p>
    <% end %>
  </div>
</div>
